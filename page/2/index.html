<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="J07Rx2NjTiwjIyxdGuCALSCM2Kzq294kYmnj1f4Izoc" />










  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="/fonts/fonts.css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="HEXH's Blog" />





  <link rel="alternate" href="/atom.xml" title="HEXH's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="面朝大海，春暖花开">
<meta property="og:type" content="website">
<meta property="og:title" content="HEXH's Blog">
<meta property="og:url" content="http://dangxia.github.io/page/2/index.html">
<meta property="og:site_name" content="HEXH's Blog">
<meta property="og:description" content="面朝大海，春暖花开">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HEXH's Blog">
<meta name="twitter:description" content="面朝大海，春暖花开">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> HEXH's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-64562250-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?192da5f5f63c7884ac9970b2d7d49848";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">HEXH's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">面朝大海，春暖花开</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/06/scala/Basic-Types-and-Operations/" itemprop="url">
                  Chapter5：Basic Types and Operations
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-06T11:21:24+08:00" content="2015-12-06">
              2015-12-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Scala/" itemprop="url" rel="index">
                    <span itemprop="name">Scala</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/06/scala/Basic-Types-and-Operations/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/06/scala/Basic-Types-and-Operations/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3>Literals</h3>
<ul>
<li>String literals</li>
</ul>
<p>Scala includes a special syntaxfor raw strings. You start and end a <code>raw string</code> with three double quotationmarks in a row (&quot;&quot;&quot;). The interior of a raw string may contain any characterswhatsoever, including newlines, quotation marks, and special characters, except of course three quotes in a row.</p>
<figure class="highlight"><figcaption><span>example</span></figcaption><table><tr><td class="code"><pre><span class="line">println("""Welcome to Ultamix 3000.</span><br><span class="line">           Type "HELP" for help.""")</span><br><span class="line">//Welcome to Ultamix 3000.</span><br><span class="line">//         Type "HELP" for help.</span><br></pre></td></tr></table></figure>
<figure class="highlight"><figcaption><span>put a pipe character (|) at the front of each line,then call stripMargin on strings,to escape the leading spaces</span></figcaption><table><tr><td class="code"><pre><span class="line">println("""|Welcome to Ultamix 3000.</span><br><span class="line">|Type "HELP" for help.""".stripMargin)</span><br><span class="line">//Welcome to Ultamix 3000.</span><br><span class="line">//Type "HELP" for help.""".stripMargin</span><br></pre></td></tr></table></figure>
<ul>
<li>Symbol literals</li>
</ul>
<p>A symbol literal is written 'ident, where ident can be any alphanumericidentifier. Such literals are mapped to instances of the predefined classscala.Symbol. Specifically, the literal 'cymbal will be expanded by thecompiler to a factory method invocation: Symbol(&quot;cymbal&quot;).</p>
<blockquote>
<p><strong>NOTE:</strong><br>
Another thing that’s noteworthy is that symbols are interned(限定的). If you write the same symbol literal twice, both expressions will refer to the exact same Symbol object.</p>
</blockquote>
<h3>Operators and methods</h3>
<p>Scala provides a rich set of operators for its basic types. As mentioned inprevious chapters, these operators are actually just a nice syntax for ordinary method calls.</p>
<blockquote>
<p><strong>Any method can be an operator</strong><br>
In Scala operators are not special language syntax: any method can be an operator. What makes a method an operator is how you use it. When you write “s.indexOf('o')”, indexOf is not an operator. But when you write “s indexOf 'o'”, indexOf is an operator, because you’re using it in operator notation.</p>
</blockquote>
<ul>
<li>infix operator</li>
</ul>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="comment">//single argument</span></span><br><span class="line">s indexOf 'o'</span><br><span class="line"><span class="comment">//multiple arguments</span></span><br><span class="line">s indexOf ('o', <span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>prefix operator</li>
</ul>
<p>Scala will transform the expression -2.0 into the method invocation “(2.0).unary_-”</p>
<blockquote>
<p><strong>NOTE</strong>:The only identifiers that can be used as prefix operators are<code>+, -, !, and ~</code>.Thus, if you define a method named unary_!, you could invoke that methodon a value or variable of the appropriate type using prefix operator notation,such as !p. But if you define a method named unary_*, you wouldn’t be ableto use prefix operator notation, because * isn’t one of the four identifiers thatcan be used as prefix operators.</p>
</blockquote>
<ul>
<li>postfix operator</li>
</ul>
<p>Postfix operators are methods that take no arguments, when they are invoked without a dot or parentheses.</p>
<h3>Relational and logical operations</h3>
<blockquote>
<p><strong>Note:</strong> You may be wondering how short-circuiting can work given operators are just methods. Normally, all arguments are evaluated before entering a method, so how can a method avoid evaluating its second argument? The answer is that all Scala methods have a facility for delaying the evaluation of their arguments, or even declining to evaluate them at all. The facility is called by-name parameters and is discussed in Section 9.5.</p>
</blockquote>
<h3>Object equality</h3>
<p>If you want to compare two objects for equality, you can use either ==, or its inverse !=.</p>
<blockquote>
<p>**How Scala’s == differs from Java’s **<br>
In Java,you can use == to compare both primitive and reference types. On primitive types, Java’s == compares value equality, as in Scala. On reference types, however, Java’s == compares reference equality, which means the two variables point to the same object on the JVM’s heap. Scala provides a facility for comparing reference equality, as well, under the name eq. However, eq and its opposite, ne, only apply to objects that directly map to Java objects. The full details about eq and ne are given in Sections 11.1 and 11.2. Also, see Chapter 30 on how to write a good equals method.</p>
</blockquote>
<h3>Operator precedence and associativity</h3>
<table>
<thead>
<tr>
<th>Operator precedence</th>
</tr>
</thead>
<tbody>
<tr>
<td>(all other special characters)</td>
</tr>
<tr>
<td>* / %</td>
</tr>
<tr>
<td>+ -</td>
</tr>
<tr>
<td>:</td>
</tr>
<tr>
<td>= !</td>
</tr>
<tr>
<td>&lt; &gt;</td>
</tr>
<tr>
<td>&amp; ˆ |</td>
</tr>
<tr>
<td>(all letters)</td>
</tr>
<tr>
<td>(all assignment operators)</td>
</tr>
</tbody>
</table>
<ul>
<li>Scala decides precedence based on the first character of the methods used in operator notation</li>
</ul>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">a +++ b *** c <span class="comment">//a +++ (b *** c)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>The one exception to the precedence rule</li>
</ul>
<p>The one exception to the precedence rule, alluded to above, concerns <strong>assignment operators</strong>, which end in an equals character. If an operator ends in an equals character (=), and the operator is not one of the comparison operators &lt;=, &gt;=, ==, or !=, then the precedence of the operator is the same as that of <strong>simple assignment (=)</strong>.</p>
<figure class="highlight scala"><figcaption><span>because *= is classified as an assignment operator whose precedence is lower than +, even though the operator’s first character is *, which would suggest a precedence higher than +.</span></figcaption><table><tr><td class="code"><pre><span class="line">x *= y + <span class="number">1</span> <span class="comment">//x *= (y + 1)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>associativity</li>
</ul>
<p>No matter what associativity an operator has, however, its operands are always evaluated left to right<br>
If the methods end in ‘:’, they are grouped right to left; otherwise, they are grouped left to right. For example,<code>a ::: b ::: c</code> is treated as <code>a ::: (b ::: c)</code>. But <code>a * b * c</code>, by contrast, is treated as <code>(a * b) * c</code>.</p>
<h3>Rich wrappers</h3>
<p><strong>Some rich operations</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 max 5</td>
<td>5</td>
</tr>
<tr>
<td>0 min 5</td>
<td>0</td>
</tr>
<tr>
<td>-2.7 abs</td>
<td>2.7</td>
</tr>
<tr>
<td>-2.7 round</td>
<td>-3L</td>
</tr>
<tr>
<td>1.5 isInfinity</td>
<td>false</td>
</tr>
<tr>
<td>(1.0 / 0) isInfinity</td>
<td>true</td>
</tr>
<tr>
<td>4 to 6</td>
<td>Range(4, 5, 6)</td>
</tr>
<tr>
<td>&quot;bob&quot; capitalize</td>
<td>&quot;Bob&quot;</td>
</tr>
<tr>
<td>&quot;robert&quot; drop 2</td>
<td>&quot;bert&quot;</td>
</tr>
</tbody>
</table>
<p><strong>Rich wrapper classes</strong></p>
<table>
<thead>
<tr>
<th>Basic</th>
<th>type Rich wrapper</th>
</tr>
</thead>
<tbody>
<tr>
<td>Byte</td>
<td>scala.runtime.RichByte</td>
</tr>
<tr>
<td>Short</td>
<td>scala.runtime.RichShort</td>
</tr>
<tr>
<td>Int</td>
<td>scala.runtime.RichInt</td>
</tr>
<tr>
<td>Char</td>
<td>scala.runtime.RichChar</td>
</tr>
<tr>
<td>Float</td>
<td>scala.runtime.RichFloat</td>
</tr>
<tr>
<td>Double</td>
<td>scala.runtime.RichDouble</td>
</tr>
<tr>
<td>Boolean</td>
<td>scala.runtime.RichBoolean</td>
</tr>
<tr>
<td>String</td>
<td>scala.collection.immutable.StringOps</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/02/jstorm/JStormMasterBatchCoordinator-Code/" itemprop="url">
                  MasterBatchCoordinator源码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-02T14:46:49+08:00" content="2015-12-02">
              2015-12-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/jstorm/" itemprop="url" rel="index">
                    <span itemprop="name">jstorm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/02/jstorm/JStormMasterBatchCoordinator-Code/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/02/jstorm/JStormMasterBatchCoordinator-Code/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4>CoordinatorState Zk</h4>
<figure class="highlight haml"><table><tr><td class="code"><pre><span class="line">$&#123;spout_id&#125;</span><br><span class="line">  -<span class="ruby">coordinator</span><br><span class="line"></span>    -<span class="ruby">currtx 当前txid</span><br><span class="line"></span>    -<span class="ruby">currattempts txid =&gt; attempt</span><br><span class="line"></span>  -<span class="ruby">meta</span><br><span class="line"></span>    -<span class="ruby">txid1 存储的metaData</span><br><span class="line"></span>    -<span class="ruby">txid2</span><br><span class="line"></span>  -<span class="ruby">user</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>AttemptStatus</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">enum</span> AttemptStatus &#123;</span><br><span class="line">  PROCESSING, PROCESSED, COMMITTING</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//multi spout state relate to zk</span></span><br><span class="line"><span class="keyword">private</span> List&lt;TransactionalState&gt; _states = <span class="keyword">new</span> ArrayList();</span><br><span class="line"><span class="comment">//active Tx txid =&gt; &#123;status,attempt&#125;</span></span><br><span class="line"><span class="comment">//processing--[first ack]--&gt;processed--[second ack]--&gt;committing--[third ack]--&gt;&#123;removed,_currTransaction++&#125;</span></span><br><span class="line"><span class="comment">//any status --[fail ack]--&gt;&#123;remove all larger or equals tx&#125;</span></span><br><span class="line">TreeMap&lt;Long, TransactionStatus&gt; _activeTx = <span class="keyword">new</span> TreeMap&lt;Long, TransactionStatus&gt;();</span><br><span class="line">TreeMap&lt;Long, Integer&gt; _attemptIds;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> SpoutOutputCollector _collector;</span><br><span class="line">Long _currTransaction;</span><br><span class="line"><span class="keyword">int</span> _maxTransactionActive;</span><br><span class="line"></span><br><span class="line">List&lt;ITridentSpout.BatchCoordinator&gt; _coordinators = <span class="keyword">new</span> ArrayList();</span><br><span class="line"></span><br><span class="line">List&lt;String&gt; _managedSpoutIds;</span><br><span class="line">List&lt;ITridentSpout&gt; _spouts;</span><br><span class="line">WindowedTimeThrottler _throttler;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/30/jstorm/JStorm-TridentTopology-Code/" itemprop="url">
                  TridentTopology源码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-30T14:46:49+08:00" content="2015-11-30">
              2015-11-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/jstorm/" itemprop="url" rel="index">
                    <span itemprop="name">jstorm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/30/jstorm/JStorm-TridentTopology-Code/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/30/jstorm/JStorm-TridentTopology-Code/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4>参考：</h4>
<ul>
<li>http://www.cnblogs.com/hseagle/p/3756862.html</li>
<li>http://www.flyne.org/article/216</li>
</ul>
<p>从TridentTopology到基本的Topology有三层，下图给出一个全局的视图。下图引自<a href="http://www.cnblogs.com/hseagle/p/3490635.html" title="徽沪一郎" target="_blank" rel="external">徽沪一郎</a>的blog<br>
<img src="/img/jstorm/trident-view.png" alt="" title="trident-view"></p>
<h4>TridentTopology属性</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//一个simple directed graph</span></span><br><span class="line">DefaultDirectedGraph&lt;Node, IndexedEdge&gt; _graph;</span><br><span class="line"><span class="comment">//state.node.id=&gt;[self,stateQueryNode]</span></span><br><span class="line">Map&lt;String, List&lt;Node&gt;&gt; _colocate = <span class="keyword">new</span> HashMap();</span><br><span class="line"><span class="comment">//生成唯一的stream,state的ID</span></span><br><span class="line">UniqueIdGen _gen;</span><br></pre></td></tr></table></figure>
<h4>Node Type</h4>
<ul>
<li>Node</li>
<li>SpoutNode</li>
<li>ProcessorNode</li>
<li>PartitionNode</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">enum</span> SpoutType &#123;</span><br><span class="line">    DRPC, BATCH</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>TridentTopology#newStream</code> create a BATCH <code>SpoutNode</code> with <code>ITridentSpout</code>,若不是<code>ITridentSpout</code>最终也会被包装成<code>ITridentSpout</code></p>
<ul>
<li>IRichSpout : RichSpoutBatchExecutor</li>
<li>IBatchSpout : BatchSpoutExecutor</li>
<li>IPartitionedTridentSpout : PartitionedTridentSpoutExecutor</li>
<li>IOpaquePartitionedTridentSpout : OpaquePartitionedTridentSpoutExecutor</li>
</ul>
<p><code>TridentTopology#newDRPCStream</code> create a DRPC <code>SpoutNode</code> with <code>DRPCSpout</code>，没有txid</p>
<p><code>TridentTopology#newStaticState</code> create a <code>Node</code> with <code>NodeStateInfo</code><br>
奇怪，一直以为只会创建<code>Node</code>的子类？</p>
<h3>Node name，Stream name，StreamId</h3>
<p>TridentTopology 直接创建的Node name都为空，相应的Stream的name也为空。<br>
Stream的name可以通过Stream#name(String name)来修改，但与之相依的Node的name不能相应改变。<br>
当在Stream通过operation创建新的Node时，Node的name为创建它的Stream的name。</p>
<p>Stream operation create new Node,generally,create a new stream id,except operation <code>partition</code>,new node using it's parent streamId.</p>
<h4>build</h4>
<figure class="highlight java"><figcaption><span>TridentTopology#build</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//其中mergedGroups为spoutGroup,boltGroup</span></span><br><span class="line"><span class="comment">//spoutNodes 为SpoutNode集合</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//已经省略了，完成drpc的环，以及node合并成group等。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//node =&gt; batchGroupName,ex:bg0,bg1</span></span><br><span class="line"><span class="comment">//可能有多个batchGroup,亲测可以&#123;没有连接的多个拓扑图&#125;</span></span><br><span class="line">Map&lt;Node, String&gt; batchGroupMap = <span class="keyword">new</span> HashMap();</span><br><span class="line">List&lt;Set&lt;Node&gt;&gt; connectedComponents = <span class="keyword">new</span> ConnectivityInspector&lt;Node, IndexedEdge&gt;(graph).connectedSets();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; connectedComponents.size(); i++) &#123;</span><br><span class="line">  String groupId = <span class="string">"bg"</span> + i;</span><br><span class="line">  <span class="keyword">for</span> (Node n : connectedComponents.get(i)) &#123;</span><br><span class="line">    batchGroupMap.put(n, groupId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//计算每个Group的parallelism</span></span><br><span class="line">Map&lt;Group, Integer&gt; parallelisms = getGroupParallelisms(graph, grouper, mergedGroups);</span><br><span class="line"></span><br><span class="line">TridentTopologyBuilder builder = <span class="keyword">new</span> TridentTopologyBuilder();</span><br><span class="line"></span><br><span class="line"><span class="comment">//spoutNode =&gt; spoutId ,ex:spout0,spout1 String为componentId</span></span><br><span class="line">Map&lt;Node, String&gt; spoutIds = genSpoutIds(spoutNodes);</span><br><span class="line"><span class="comment">//opretionNode =&gt; boltId,ex:b-0,b-1,b-2-kkk String为componentId</span></span><br><span class="line">Map&lt;Group, String&gt; boltIds = genBoltIds(mergedGroups);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (SpoutNode sn : spoutNodes) &#123;</span><br><span class="line">  Integer parallelism = parallelisms.get(grouper.nodeGroup(sn));</span><br><span class="line">  <span class="keyword">if</span> (sn.type == SpoutNode.SpoutType.DRPC) &#123;</span><br><span class="line">    <span class="comment">//spout0,s0,IRichSpout,parallelism,bg0</span></span><br><span class="line">    builder.setBatchPerTupleSpout(spoutIds.get(sn), sn.streamId, (IRichSpout) sn.spout, parallelism,</span><br><span class="line">        batchGroupMap.get(sn));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ITridentSpout s;</span><br><span class="line">    <span class="keyword">if</span> (sn.spout <span class="keyword">instanceof</span> IBatchSpout) &#123;</span><br><span class="line">      s = <span class="keyword">new</span> BatchSpoutExecutor((IBatchSpout) sn.spout);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sn.spout <span class="keyword">instanceof</span> ITridentSpout) &#123;</span><br><span class="line">      s = (ITridentSpout) sn.spout;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">          <span class="string">"Regular rich spouts not supported yet... try wrapping in a RichSpoutBatchExecutor"</span>);</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> handle regular rich spout without batches (need</span></span><br><span class="line">      <span class="comment">// lots of updates to support this throughout)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//spout0,s0,txStateId,ITridentSpout,parallelism,bg0</span></span><br><span class="line">    builder.setSpout(spoutIds.get(sn), sn.streamId, sn.txId, s, parallelism, batchGroupMap.get(sn));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Group g : mergedGroups) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!isSpoutGroup(g)) &#123;</span><br><span class="line">    Integer p = parallelisms.get(g);</span><br><span class="line">    <span class="comment">//stream to batchGroup &#123;s0=&gt;bg0&#125;</span></span><br><span class="line">    Map&lt;String, String&gt; streamToGroup = getOutputStreamBatchGroups(g, batchGroupMap);</span><br><span class="line">    <span class="comment">//b-0,SubtopologyBolt(graph, g.nodes, batchGroupMap),parallelism,&#123;bg0&#125;,&#123;s0=&gt;bg0&#125;</span></span><br><span class="line">    BoltDeclarer d = builder.setBolt(boltIds.get(g), <span class="keyword">new</span> SubtopologyBolt(graph, g.nodes, batchGroupMap), p,</span><br><span class="line">        committerBatches(g, batchGroupMap), streamToGroup);</span><br><span class="line">    Collection&lt;PartitionNode&gt; inputs = uniquedSubscriptions(externalGroupInputs(g));</span><br><span class="line">    <span class="keyword">for</span> (PartitionNode n : inputs) &#123;</span><br><span class="line">      Node parent = TridentUtils.getParent(graph, n);</span><br><span class="line">      String componentId;</span><br><span class="line">      <span class="keyword">if</span> (parent <span class="keyword">instanceof</span> SpoutNode) &#123;</span><br><span class="line">        componentId = spoutIds.get(parent);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        componentId = boltIds.get(grouper.nodeGroup(parent));</span><br><span class="line">      &#125;</span><br><span class="line">      d.grouping(<span class="keyword">new</span> GlobalStreamId(componentId, n.streamId), n.thriftGrouping);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> builder.buildTopology();</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>TridentTopologyBuilder#setBatchPerTupleSpout</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> SpoutDeclarer <span class="title">setBatchPerTupleSpout</span><span class="params">(String id, String streamName, IRichSpout spout, Integer parallelism,</span><br><span class="line">      String batchGroup)</span> </span>&#123;</span><br><span class="line">  Map&lt;String, String&gt; batchGroups = <span class="keyword">new</span> HashMap();</span><br><span class="line">  batchGroups.put(streamName, batchGroup);</span><br><span class="line">  <span class="comment">//_batchIds.put(new GlobalStreamId(id, streamName), batchGroup);GlobalStreamId=&gt;batchGroup</span></span><br><span class="line">  markBatchGroups(id, batchGroups);</span><br><span class="line">  SpoutComponent c = <span class="keyword">new</span> SpoutComponent(spout, streamName, parallelism, batchGroup);</span><br><span class="line">  <span class="comment">//componentId =&gt; SpoutComponent</span></span><br><span class="line">  _batchPerTupleSpouts.put(id, c);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> SpoutDeclarerImpl(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>TridentTopologyBuilder#setSpout</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> SpoutDeclarer <span class="title">setSpout</span><span class="params">(String id, String streamName, String txStateId, ITridentSpout spout,</span><br><span class="line">      Integer parallelism, String batchGroup)</span> </span>&#123;</span><br><span class="line">  Map&lt;String, String&gt; batchGroups = <span class="keyword">new</span> HashMap();</span><br><span class="line">  batchGroups.put(streamName, batchGroup);</span><br><span class="line">  markBatchGroups(id, batchGroups);</span><br><span class="line"></span><br><span class="line">  TransactionalSpoutComponent c = <span class="keyword">new</span> TransactionalSpoutComponent(spout, streamName, parallelism, txStateId,</span><br><span class="line">      batchGroup);</span><br><span class="line">  _spouts.put(id, c);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> SpoutDeclarerImpl(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/30/jstorm/JStorm-TopologyBuilder-Code/" itemprop="url">
                  TopologyBuilder源码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-30T14:46:49+08:00" content="2015-11-30">
              2015-11-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/jstorm/" itemprop="url" rel="index">
                    <span itemprop="name">jstorm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/30/jstorm/JStorm-TopologyBuilder-Code/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/30/jstorm/JStorm-TopologyBuilder-Code/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h4>TopologyBuilder功能:</h4>
<p>编织<code>ISpout，IBolt</code>的拓扑图，并生成StormTopology实例，以便thrift使用.</p>
<h4>用户编程的接口:IBolt，ISpout，IStateSpout</h4>
<p><code>IRichBolt，IBasicBolt，IRichSpout，IRichStateSpout</code></p>
<ul>
<li><code>IBasicBolt</code>没有继承<code>IBolt</code>，在编织拓扑结构时，使用<code>BasicBoltExecutor</code>包装成<code>IRichBolt</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> BoltDeclarer <span class="title">setBolt</span><span class="params">(String id, IBasicBolt bolt, Number parallelism_hint)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> setBolt(id, <span class="keyword">new</span> BasicBoltExecutor(bolt), parallelism_hint);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>IRichStateSpout</code>暂时没有实现</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStateSpout</span><span class="params">(String id, IRichStateSpout stateSpout, Number parallelism_hint)</span> </span>&#123;</span><br><span class="line">    validateUnusedId(id);</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> finish</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/11/30/jstorm/JStorm-TopologyBuilder-Code/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/25/jstorm/NimbusData-Code/" itemprop="url">
                  NimbusData源码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-25T14:46:49+08:00" content="2015-11-25">
              2015-11-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/jstorm/" itemprop="url" rel="index">
                    <span itemprop="name">jstorm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/25/jstorm/NimbusData-Code/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/25/jstorm/NimbusData-Code/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3>属性</h3>
<ul>
<li>downloaders,uploaders</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// TODO two kind of value:Channel/BufferFileInputStream</span></span><br><span class="line"><span class="keyword">private</span> TimeCacheMap&lt;Object, Object&gt; downloaders;</span><br><span class="line"><span class="keyword">private</span> TimeCacheMap&lt;Object, Object&gt; uploaders;</span><br><span class="line"><span class="comment">/**</span><br><span class="line">* During upload/download with the master, how long an upload or download connection is idle before nimbus considers it dead and drops the connection.</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String NIMBUS_FILE_COPY_EXPIRATION_SECS = <span class="string">"nimbus.file.copy.expiration.secs"</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>submittedCount</li>
<li>stormClusterState ==&gt; com.alibaba.jstorm.cluster.StormClusterState</li>
<li>statusTransition</li>
</ul>
<h3>StormClusterState</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">disconnect</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove_storm</span><span class="params">(String topology_id)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">try_remove_storm</span><span class="params">(String topology_id)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">assignments</span><span class="params">(RunnableCallback callback)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Assignment <span class="title">assignment_info</span><span class="params">(String topology_id, RunnableCallback callback)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_assignment</span><span class="params">(String topology_id, Assignment info)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> AssignmentBak <span class="title">assignment_bak</span><span class="params">(String topologyName)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">backup_assignment</span><span class="params">(String topology_id, AssignmentBak info)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">active_storms</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> StormBase <span class="title">storm_base</span><span class="params">(String topology_id, RunnableCallback callback)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">activate_storm</span><span class="params">(String topology_id, StormBase storm_base)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update_storm</span><span class="params">(String topology_id, StormStatus new_elems)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_storm_monitor</span><span class="params">(String topologyId, <span class="keyword">boolean</span> isEnable)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove_storm_base</span><span class="params">(String topology_id)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">task_storms</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Set&lt;Integer&gt; <span class="title">task_ids</span><span class="params">(String topology_id)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Set&lt;Integer&gt; <span class="title">task_ids_by_componentId</span><span class="params">(String topologyId, String componentId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_task</span><span class="params">(String topologyId, Map&lt;Integer, TaskInfo&gt; taskInfoMap)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add_task</span><span class="params">(String topology_id, Map&lt;Integer, TaskInfo&gt; taskInfoMap)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove_task</span><span class="params">(String topologyId, Set&lt;Integer&gt; taskIds)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;Integer, TaskInfo&gt; <span class="title">task_all_info</span><span class="params">(String topology_id)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">heartbeat_storms</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">topology_heartbeat</span><span class="params">(String topology_id, TopologyTaskHbInfo info)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> TopologyTaskHbInfo <span class="title">topology_heartbeat</span><span class="params">(String topologyId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teardown_heartbeats</span><span class="params">(String topology_id)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">task_error_storms</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">task_error_ids</span><span class="params">(String topologyId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">report_task_error</span><span class="params">(String topology_id, <span class="keyword">int</span> task_id, Throwable error)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">report_task_error</span><span class="params">(String topology_id, <span class="keyword">int</span> task_id, String error, String tag)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;Integer, String&gt; <span class="title">topo_lastErr_time</span><span class="params">(String topologyId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove_lastErr_time</span><span class="params">(String topologyId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;TaskError&gt; <span class="title">task_errors</span><span class="params">(String topology_id, <span class="keyword">int</span> task_id)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove_task_error</span><span class="params">(String topologyId, <span class="keyword">int</span> taskId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">task_error_time</span><span class="params">(String topologyId, <span class="keyword">int</span> taskId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">task_error_info</span><span class="params">(String topologyId, <span class="keyword">int</span> taskId, <span class="keyword">long</span> timeStamp)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teardown_task_errors</span><span class="params">(String topology_id)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">supervisors</span><span class="params">(RunnableCallback callback)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> SupervisorInfo <span class="title">supervisor_info</span><span class="params">(String supervisor_id)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">supervisor_heartbeat</span><span class="params">(String supervisor_id, SupervisorInfo info)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">try_to_be_leader</span><span class="params">(String path, String host, RunnableCallback callback)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">get_leader_host</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">leader_existed</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">get_nimbus_slaves</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update_nimbus_slave</span><span class="params">(String host, <span class="keyword">int</span> time)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">get_nimbus_slave_time</span><span class="params">(String host)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unregister_nimbus_host</span><span class="params">(String host)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update_nimbus_detail</span><span class="params">(String hostPort, Map map)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Map <span class="title">get_nimbus_detail</span><span class="params">(String hostPort, <span class="keyword">boolean</span> watch)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unregister_nimbus_detail</span><span class="params">(String hostPort)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_topology_metric</span><span class="params">(String topologyId, Object metric)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">get_topology_metric</span><span class="params">(String topologyId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">get_metrics</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">list_dirs</span><span class="params">(String path, <span class="keyword">boolean</span> watch)</span> <span class="keyword">throws</span>  Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">backpressureInfos</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_backpressure_info</span><span class="params">(String topologyId, Map&lt;String, SourceBackpressureInfo&gt; sourceToBackpressureInfo)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, SourceBackpressureInfo&gt; <span class="title">get_backpressure_info</span><span class="params">(String topologyId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teardown_backpressure</span><span class="params">(String topologyId)</span> <span class="keyword">throws</span> Exception</span>;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/25/jstorm/JStormCache-Code/" itemprop="url">
                  JStormCache源码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-25T14:46:49+08:00" content="2015-11-25">
              2015-11-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/jstorm/" itemprop="url" rel="index">
                    <span itemprop="name">jstorm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/25/jstorm/JStormCache-Code/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/25/jstorm/JStormCache-Code/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3>Interface</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(Map&lt;Object, Object&gt; conf)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cleanup</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">Object <span class="title">get</span><span class="params">(String key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getBatch</span><span class="params">(Map&lt;String, Object&gt; map)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(String key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeBatch</span><span class="params">(Collection&lt;String&gt; keys)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(String key, Object value, <span class="keyword">int</span> timeoutSecond)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(String key, Object value)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">putBatch</span><span class="params">(Map&lt;String, Object&gt; map)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">putBatch</span><span class="params">(Map&lt;String, Object&gt; map, <span class="keyword">int</span> timeoutSeconds)</span></span>;</span><br></pre></td></tr></table></figure>
<h3>JStormCache的实现</h3>
<ul>
<li>com.alibaba.jstorm.cache.TimeoutMemCache</li>
<li>com.alibaba.jstorm.cache.RocksDBCache</li>
<li>com.alibaba.jstorm.cache.RocksTTLDBCache</li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/11/25/jstorm/JStormCache-Code/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/25/trivial/links/" itemprop="url">
                  links
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-25T11:44:02+08:00" content="2015-11-25">
              2015-11-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/trivial/" itemprop="url" rel="index">
                    <span itemprop="name">trivial</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/25/trivial/links/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/25/trivial/links/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4>2015-11-25</h4>
<ul>
<li>http://stackoverflow.com/questions/7676022/html5-flexible-box-model-height-calculation/15388247#15388247</li>
<li>https://commons.apache.org/proper/commons-exec/</li>
<li>http://mathworld.wolfram.com/DirectedGraph.html</li>
<li>http://zh.wordow.com/english/dictionary/?t=bidirected</li>
<li>https://zh.wikipedia.org/wiki/%E5%AE%8C%E5%85%A8%E5%9C%96</li>
<li>http://mathworld.wolfram.com/Indegree.html</li>
<li>https://backlogtool.com/git-guide/tw/stepup/stepup7_4.html</li>
<li>http://www.cnblogs.com/fxjwind/p/3182351.html</li>
<li>http://ifeve.com/disruptor/</li>
<li>http://www.yworks.com/</li>
<li>http://www.cnblogs.com/xishuai/p/iddd-cqrs-and-eda.html</li>
<li>http://www.umlchina.com/book/softmeth.htm</li>
<li>http://www.cnblogs.com/hseagle/p/3756862.html</li>
<li>http://www.flyne.org/article/216</li>
<li>http://www.cnblogs.com/hseagle/p/3756862.html</li>
<li>http://www.sqlparty.com/mapreduce%E5%BA%94%E7%94%A8%E4%B8%ADcombinefileinputformat%E5%8E%9F%E7%90%86%E4%B8%8E%E7%94%A8%E6%B3%95/</li>
<li>http://segmentfault.com/a/1190000002680804</li>
<li>http://blog.csdn.net/dizzthxl/article/details/8498833</li>
<li>http://www.cnblogs.com/basecn/p/4288456.html</li>
<li>http://blog.jpush.cn/redis-twemproxy-benchmark/</li>
<li>http://technology.inmobi.com/blog/real-time-stream-processing-at-inmobi-part-1</li>
<li>http://www.michael-noll.com/blog/2013/06/21/understanding-storm-internal-message-buffers/</li>
<li>https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet</li>
<li>http://www.unjeep.com/hexomarkdownbiaoge/</li>
</ul>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/25/jstorm/JStorm-Local-Dir/" itemprop="url">
                  JStorm Local Dir
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-25T11:24:40+08:00" content="2015-11-25">
              2015-11-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/jstorm/" itemprop="url" rel="index">
                    <span itemprop="name">jstorm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/25/jstorm/JStorm-Local-Dir/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/25/jstorm/JStorm-Local-Dir/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3>storm.local.dir</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">  * A directory on the local filesystem used by Storm for any local filesystem usage it needs. The directory must exist and the Storm daemons must have</span><br><span class="line">  * permission to read/write from this location.</span><br><span class="line">  */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String STORM_LOCAL_DIR = <span class="string">"storm.local.dir"</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>nimbus [nimbus local dir]
<ul>
<li>pids
<ul>
<li>{$nimbus_pid}</li>
</ul>
</li>
<li>rocksdb NimbusCache的data目录</li>
</ul>
</li>
<li>metrics
<ul>
<li>rocksdb JStormMetricCache的data目录</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/25/java/Get-the-JVM-Pid/" itemprop="url">
                  Get the JVM Pid
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-25T11:18:02+08:00" content="2015-11-25">
              2015-11-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/25/java/Get-the-JVM-Pid/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/25/java/Get-the-JVM-Pid/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">  * Gets the pid of this JVM, because Java doesn't provide a real way to do this.</span><br><span class="line">  *</span><br><span class="line">  * <span class="doctag">@return</span></span><br><span class="line">  */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">process_pid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String name = ManagementFactory.getRuntimeMXBean().getName();</span><br><span class="line">    String[] split = name.split(<span class="string">"@"</span>);</span><br><span class="line">    <span class="keyword">if</span> (split.length != <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Got unexpected process name: "</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> split[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/23/english/2015/English-Words-20151123/" itemprop="url">
                  English-Words-20151123
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-23T17:46:01+08:00" content="2015-11-23">
              2015-11-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/english/" itemprop="url" rel="index">
                    <span itemprop="name">english</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/23/english/2015/English-Words-20151123/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/23/english/2015/English-Words-20151123/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <ul>
<li><a href="#v">notation /nəʊ'teɪʃ(ə)n/</a> n. 符号；乐谱；注释；记号法</li>
<li><a href="#v">infix /ɪn'fɪks/</a> vt. 把…印入；把…插进 n. [计] 中缀；插入词</li>
<li><a href="#v">graduation /grædʒʊ'eɪʃ(ə)n/</a> n. 毕业；毕业典礼；刻度，分度；分等级</li>
<li><a href="#v">congratulation /kəngrætjʊ'leɪʃ(ə)n/</a> n. 祝贺；贺辞</li>
<li><a href="#v">soccer /'sɒkə/</a> n. 英式足球，足球</li>
<li><a href="#v">score /skɔː/</a> 分数；二十；配乐；刻痕</li>
<li><a href="#v">translate /træns'leɪt/</a> vt. 翻译；转化；解释；转变为；调动</li>
<li><a href="#v">transform /træns'fɔːm/</a> vt. 改变，使…变形；转换</li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/11/23/english/2015/English-Words-20151123/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/img/logo.svg"
               alt="Xuehui He" />
          <p class="site-author-name" itemprop="name">Xuehui He</p>
          <p class="site-description motion-element" itemprop="description">面朝大海，春暖花开</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">83</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/dangxia" target="_blank" title="github">
                  
                    <i class="fa fa-globe"></i>
                  
                  github
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xuehui He</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>


  
  <script type="text/javascript" src="/english.js"></script>

  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"xuehuihe-java"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
